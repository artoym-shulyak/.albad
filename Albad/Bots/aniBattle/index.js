require('./utils/dataBase.js')
const bot = require('./utils/telegramBot.js')
const i18n = require('./utils/i18n.js')

// -> Etc...
bot.use(i18n.middleware())

// -> Other actions for Bot
bot.use(require('./composers/start/index'))
bot.use(require('./composers/studia/index'))
bot.use(require('./composers/getChar/index'))
bot.use(require('./composers/settings/index'))
bot.use(require('./composers/world/index'))
bot.use(require('./composers/shop/index'))
bot.use(require('./composers/amulets/index'))
bot.use(require('./composers/donat/index'))
bot.use(require('./composers/books/index'))
bot.use(require('./composers/cards/index'))
bot.use(require('./composers/swap/index'))
bot.use(require('./composers/rating/index'))
bot.use(require('./composers/vipCard/index'))
bot.use(require('./composers/bonus/index'))
bot.use(require('./composers/referral/index'))
bot.use(require('./composers/quest/index'))
bot.use(require('./composers/backpack/index'))
bot.use(require('./composers/events/index'))
bot.use(require('./composers/myCharacters/index'))
bot.use(require('./composers/battle/index'))
bot.use(require('./composers/black_market/index'))
bot.use(require('./composers/clan/index'))
bot.use(require('./composers/market/index'))
bot.use(require('./composers/updateTimes/index'))
bot.use(require('./composers/admin/index'))

// -> Started Bot
bot
	.launch()
	.then(() => {
		console.log('Bot started!')
	})
	.catch(err => console.log(err))

process.once('SIGINT', () => bot.stop('SIGINT'))
process.once('SIGTERM', () => bot.stop('SIGTERM'))

 
// –ó–∞–¥–∞—á–∏ ----->
// 1) –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–∫—É–ø–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è –ö–ª–∞–Ω–∞ (–Ω—É–∂–µ–Ω –∫–ª—é—á)
// 2) –°–¥–µ–ª–∞—Ç—å –¥–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–∫–∏
// 3) –°—Ä–∞–∂–µ–Ω–∏–µ –≠—Ç–∞–ø—ã (–ù–∞—Ä—É—Ç–æ –£–∑—É–º–∞–∫–∏)
// 4) –°—Ä–∞–∂–µ–Ω–∏–µ –≠—Ç–∞–ø—ã (–ú–∞–≥–∏—á–µ—Å–∫–∞—è –ë–∏—Ç–≤–∞)

//----
// –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–µ–ª–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é (mongoose)

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã --->
// 1) –°—Ç–∞—Ä—Ç ‚úÖ
// 2) –°—Ç—É–¥–∏—è ‚úÖ
//     1. –°—Ä–∞–∂–µ–Ω–∏–µ ‚úÖ
//     2. –†–µ–π—Ç–∏–Ω–≥ ‚úÖ
//     3. –ï–∂–µ–¥–Ω–µ–≤–Ω–æ ‚úÖ
//     4. –ú–∏—Ä ‚úÖ
//     5. –†—é–∫–∑–∞–∫ ‚úÖ
//     6. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚úÖ
// 2) –ú–∏—Ä
//     1. –¢–∞–≤–µ—Ä–Ω–∞ ‚úÖ
//     2. –ë–æ–Ω—É—Å ‚úÖ
//     3. –ì–∏–ª—å–¥–∏—è ‚úÖ
//     4. VIP ‚úÖ
// 7) –¢–∞–≤–µ—Ä–Ω–∞
//     1. –ê–º—É–ª–µ—Ç—ã ‚úÖ
//     2. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ ‚úÖ
//     3. –õ–∞–≤–∫–∞ ‚úÖ
//     4. –ß–µ—Ä–Ω—ã–π —Ä—ã–Ω–æ–∫ ‚úÖ
//     5. –ö–∞—Ä—Ç—ã ‚úÖ
//     6. –û–±–º–µ–Ω ‚úÖ
//     8. –ë–∏—Ä–∂–∞ ‚úÖ


// üÜò –û–ü–û–í–ï–©–ï–ù–ò–ï –û –ö–ê–†–î–ò–ù–ê–õ–¨–ù–´–• –ò–ó–ú–ï–ù–ï–ù–ò–Ø–• –í –ë–ï–°–ï–î–ï üÜò
// –ü·¥©–∏ ô·¥á·¥õ·¥Ñ·¥õ ô—É—é –í·¥Ñ·¥á—Ö, ·¥è·¥®·¥è ô·¥á—â·¥Ä·¥á ç ·¥è ·¥õ·¥è ç, —á·¥õ·¥è  ô ·¥Ñ·¥ã·¥è·¥©·¥è ç  ô·¥©·¥á ç·¥á–Ω–∏ –±—É–¥·¥á·¥õ ·¥ã·¥Ä·¥©–¥–∏–Ω·¥Ä·¥ß—å–Ω—ã·¥á –∏…ú ç·¥á–Ω·¥á–Ω–∏—è  ô –ë·¥á·¥Ñ·¥á–¥·¥á.  

// –ù·¥Ä –¥·¥Ä–Ω–Ω—ã–π  ç·¥è ç·¥á–Ω·¥õ ·¥¶·¥©—É·¥®·¥®·¥Ä  ô ·¥Ñ·¥è·¥Ñ·¥õ·¥è—è–Ω–∏·¥á ·¥è–±—â·¥á–¥·¥è·¥Ñ·¥õ—É·¥®–Ω·¥è–π, ·¥®·¥©·¥è—â·¥á ·¥¶·¥è ô·¥è·¥©—è ·¥è·¥õ·¥ã·¥©—ã·¥õ·¥Ä –¥·¥ß—è –í·¥Ñ·¥á—Ö. –í·¥Ñ·¥õ—É·¥®·¥Ä·¥õ—å ·¥®·¥è ·¥®·¥è–∏·¥Ñ·¥ã—É, ·¥Ñ·¥Ñ—ã·¥ß·¥ã·¥á  ç·¥è–∂·¥á·¥õ ·¥ß—é–±·¥è–π —É—á·¥Ä·¥Ñ·¥õ–Ω–∏·¥ã. 

// –ö–∞–∫–∏–µ –±—É–¥—É—Ç –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–µ—Å–µ–¥–µ?
// - –≥—Ä—É–ø–ø–∞ –ø–æ –ø—Ä–µ–∂–Ω–µ–º—É –±—É–¥–µ—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –æ–±—â–µ–Ω–∏–µ, –∫–æ–Ω–∫—É—Ä—Å–æ–≤ –∏ —Ç–æ–º—É –ø–æ–¥–æ–±–Ω–æ–µ
// - –±—É–¥—É—Ç –≤–Ω–µ—Å–µ–Ω—ã –Ω–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —á–∞—Ç–∞(–¥–ª—è –≥–∞–ª–æ—á–∫–∏)
// - –±–æ—Ç –∏–≥—Ä–∞ "AniversCard" –±—É–¥–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω –∏–∑ –ë–µ—Å–µ–¥—ã(–µ—Å—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, —á—Ç–æ –Ω–µ –±—É–¥–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω)
// - –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ "–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –ë–û–¢–ê –ò–ì–†–´ –ê–Ω–∏–º–µ"
// - –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø—è—Ç —Å 1 –¥–µ–∫–∞–±—Ä—è

// –ï—Å–ª–∏ –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∫–∞–∫—Å–∞—é—â–∏–π—Å—è —ç—Ç–æ–π –±–µ—Å–µ–¥—ã –∏ —Ç–æ–º—É –ø–æ–¥–æ–±–Ω–æ–µ - –í–∞–º –∫ –ê–Ω–¥·¥©·¥á–π. –°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Ç–µ—á–µ–Ω–∏–µ —Å—É—Ç–æ–∫ –æ–ø–æ–≤–µ—Å—Ç–∏–∏–º –≤—Å–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.

// üÜò –ü–†–ê–í–ò–õ–ê –ë–ï–°–ï–î–´ üÜò

// –ø1. –£—Å–ª–æ–≤–∏—è –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–∞—Ç–∞:
// 1.1. –£—á–∞—Å—Ç–Ω–∏–∫, –≤—Å—Ç—É–ø–∏–≤—à–∏–π –≤ –ë–µ—Å–µ–¥—É, –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–∞ —Å–µ–±—è –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ —Å–æ–±–ª—é–¥–∞—è –Ω–∏–∂–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞.
// 1.2. –£—á–∞—Å—Ç–Ω–∏–∫ –Ω–µ –æ–∑–Ω–∞–∫–æ–º–∏–≤—à–∏–π —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ —á–∞—Ç–∞, —É–±–µ–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –µ–≥–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —á–∞—Ç–æ–º –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö. 

// –ø2. –ü—Ä–∞–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞:
// 2.1. –û–±—â–∞—Ç—å—Å—è, –¥–µ–ª–∏—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏ –æ–±—Å—É–∂–¥–∞—Ç—å –ª—é–±—ã–µ —Ç–µ–º—ã, –∞ —Ç–∞–∫–∂–µ —Å–æ–≤–µ—Ä—à–∞—Ç—å –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ –Ω–∞—Ä—É—à–∞—é—â–∏–µ –ø4.
// 2.2. –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —á–∞—Ç–∞, –∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ –ø–ª–æ—Ö—É—é —Ä–∞–±–æ—Ç—É —á–∞—Ç–∞.
// 2.3. –£—á–∞—Å—Ç–Ω–∏–∫ –º–æ–∂–µ—Ç –æ–±–∂–∞–ª–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ç–µ–º–µ —Ñ–æ—Ä—É–º–∞, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –±—É–¥–µ—Ç –≤—ã–Ω–µ—Å–µ–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ - –í–∞–º –∫ –ê–≥–µ–Ω—Ç—É.

// –ø3. –ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
// 3.1. –ï—Å–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ –∫–∞–∫–æ–µ-–ª–∏–±–æ –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–µ—à–∞–µ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –æ–Ω –æ–±—è–∑–∞–Ω –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç–∏ —Ç–∞–∫–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è.
// 3.2. –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—Ä–∏—Å–ª—É—à–∞–ª—Å—è –∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ª—é–±–æ–π —Å—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ—Å—á–∏—Ç–∞—é—Ç —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–º. 
// 3.3. –í —Å–ª—É—á–∞–µ –≤—ã—è–≤–ª–µ–Ω–∏—è —Ñ–ª—É–¥–∞ –∏–ª–∏ —Å–ø–∞–º–∞, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —á–∞—Ç–∞ –∏–º–µ—é—Ç –ø—Ä–∞–≤–æ —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —á–∞—Ç–∞.
// 3.4. –ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤—Å–µ–≥–¥–∞ –ø—Ä–∞–≤, –¥–µ–π—Å—Ç–≤–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ –æ–±—Å—É–∂–¥–∞—é—Ç—Å—è.

// –ø4. –í —á–∞—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–µ—â–µ–Ω–æ:
// 3.1. –î–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ü–∏—è –ø–æ —Ä–∞—Å–æ–≤–æ–º—É, –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º—É, —Ä–µ–ª–∏–≥–∏–æ–∑–Ω–æ–º—É –∏–ª–∏ –∏–Ω–æ–º—É –ø—Ä–∏–∑–Ω–∞–∫—É/–ù–∞—Ü–∏–æ–Ω–∞–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ, —Ä–∞—Å–æ–≤—ã–µ –ª–æ–∑—É–Ω–≥–∏ –∏ –≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏—è –∏ –ø—Ä–æ—á–∏–µ –≤–µ—â–∏.
// 3.2. –ü—Ä—è–º–æ –∏ –∫–æ—Å–≤–µ–Ω–Ω–æ –æ—Å–∫–æ—Ä–±–ª—è—Ç—å –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —á–∞—Ç–µ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã—Ö —Å–ª–æ–≤ –ø—Ä–∏ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–∏ –∏–ª–∏ —Ö–∞–º—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–∞—Ç–∞), —Ö–∞–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–∞—Ç–∞, —É—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ä–∞–∑–±–æ—Ä–∫–∏/–≤—ã—è—Å–Ω–µ–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π.
// 3.3. –°–ø–∞–º, —Ñ–ª—É–¥, —Ä–µ–∫–ª–∞–º–∞.
// 3.4. –£–≥—Ä–æ–∑—ã –∏ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è.
// 3.5. –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–æ—Å—å–±—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —á–∞—Ç–∞.







